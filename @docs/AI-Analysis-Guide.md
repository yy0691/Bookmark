# AI 智能分析中心 — 功能说明文档

## 概述

书签智能分析中心是一个统一的书签管理与分析页面，整合了数据可视化、AI 分析、问题检测和数据管理四大模块。

**入口**：`pages/newtab/dashbord.html`

---

## 功能模块

### 1. 数据概览

| 组件 | 说明 |
|------|------|
| 指标卡片 | 总书签数、文件夹数、域名数、今日新增 |
| 书签主题词云 | 从书签标题提取关键词，按词频可视化展示 |
| 分类统计图 | 按域名自动分类，条形图展示各分类书签数量 |
| 收藏活跃度热力图 | 类似 GitHub 贡献墙，展示过去一年的收藏频率 |

### 2. AI 智能分析

| 功能 | 说明 |
|------|------|
| AI 自动分类 | 调用大语言模型 API，自动将书签分为若干语义类别 |
| 应用分类结果 | 在书签栏自动创建文件夹并移动书签 |
| 导出结果 | 导出分类结果为 CSV / JSON |
| API 状态检查 | 自动检测 API 密钥配置状态 |

### 3. 问题检测

| 检测项 | 说明 |
|--------|------|
| 重复书签 | 检测相同 URL 或相似标题的重复书签 |
| 失效链接 | HTTP 请求验证书签 URL 是否可访问 |
| 空文件夹 | 查找不含任何书签的空文件夹 |
| 格式异常 | 检测标题为空、URL 格式错误等异常书签 |

### 4. 数据管理

| 功能 | 说明 |
|------|------|
| 导入书签 | 支持 HTML / JSON / CSV 格式 |
| 导出书签 | 导出为 JSON，包含完整结构 |
| 备份数据 | 创建含元数据的完整备份文件 |
| 书签管理器 | 跳转到树形书签管理器 |

---

## 目录结构

```
pages/newtab/
├── dashbord.html          ← 统一分析中心页面
├── dashbord.js            ← Dashboard 类（合并所有逻辑）
└── ...

modules/
├── bookmarkService.js     ← 书签 CRUD、分类
├── apiService.js          ← AI API 调用
├── detectionService.js    ← 重复/失效/空文件夹检测
├── importExportService.js ← 导入导出
├── visualizationService.js← 可视化图表生成
├── uiManager.js           ← UI 工具
└── utils.js               ← 通用工具

styles/
├── apple-design-system.css← 全局设计系统
├── icons.js               ← SVG 图标库
└── README.md
```

---

## 待完善功能

- [ ] 词云交互：点击关键词筛选相关书签
- [ ] 热力图数据：接入真实 `dateAdded` 时间戳
- [ ] 检测结果列表：展示具体的重复/失效书签条目，支持批量删除
- [ ] AI 分析进度：支持分批分析大量书签（>1000）
- [ ] 深色模式适配：确保 dark theme 下所有组件正确显示
- [ ] 图表导出：支持将词云/热力图导出为图片
- [ ] 操作历史持久化：将导入/导出/备份时间存储到 `chrome.storage`
