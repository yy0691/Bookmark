<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能分析工作台 - 演示</title>
    <link rel="stylesheet" href="workbench-enhancements.css">
    <style>
        /* 基础样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .demo-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .demo-section h2 {
            margin-bottom: 16px;
            color: #1e293b;
            font-size: 20px;
        }
        
        .demo-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .status-indicator.online {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-indicator.offline {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .status-indicator.processing {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
        }
        
        .log-container {
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 13px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .log-entry {
            display: flex;
            gap: 12px;
            margin-bottom: 4px;
            align-items: flex-start;
        }
        
        .log-timestamp {
            color: #64748b;
            font-size: 12px;
            min-width: 80px;
        }
        
        .log-level {
            min-width: 50px;
            font-weight: 600;
            font-size: 11px;
        }
        
        .log-level.info { color: #60a5fa; }
        .log-level.success { color: #34d399; }
        .log-level.warning { color: #fbbf24; }
        .log-level.error { color: #f87171; }
        
        .log-message {
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>智能分析工作台 - 功能演示</h1>
        
        <!-- 模态框演示 -->
        <div class="demo-section">
            <h2>模态框功能</h2>
            <div class="demo-buttons">
                <button class="btn btn-primary" onclick="showApiSettingsDemo()">API设置</button>
                <button class="btn btn-secondary" onclick="showConfirmDemo()">确认对话框</button>
            </div>
        </div>
        
        <!-- 通知系统演示 -->
        <div class="demo-section">
            <h2>通知系统</h2>
            <div class="demo-buttons">
                <button class="btn btn-success" onclick="showNotification('操作成功完成', 'success')">成功通知</button>
                <button class="btn btn-primary" onclick="showNotification('这是一条信息', 'info')">信息通知</button>
                <button class="btn" style="background: #f59e0b; color: white;" onclick="showNotification('请注意这个警告', 'warning')">警告通知</button>
                <button class="btn btn-danger" onclick="showNotification('发生了错误', 'error')">错误通知</button>
            </div>
        </div>
        
        <!-- 状态指示器演示 -->
        <div class="demo-section">
            <h2>状态指示器</h2>
            <div class="demo-grid">
                <div>
                    <h3>系统状态</h3>
                    <div id="system-status" class="status-indicator online">
                        <div class="status-dot"></div>
                        系统在线
                    </div>
                </div>
                <div>
                    <h3>API状态</h3>
                    <div id="api-status-indicator" class="status-indicator offline">
                        <div class="status-dot"></div>
                        API未配置
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 检测结果演示 -->
        <div class="demo-section">
            <h2>检测结果显示</h2>
            <div class="demo-buttons">
                <button class="btn btn-primary" onclick="showDuplicateResults()">显示重复书签</button>
                <button class="btn btn-primary" onclick="showInvalidResults()">显示失效书签</button>
                <button class="btn btn-primary" onclick="showEmptyFolderResults()">显示空文件夹</button>
            </div>
            <div id="demo-results"></div>
        </div>
        
        <!-- 实时日志演示 -->
        <div class="demo-section">
            <h2>实时日志系统</h2>
            <div class="demo-buttons">
                <button class="btn btn-primary" onclick="addDemoLog('info')">信息日志</button>
                <button class="btn btn-success" onclick="addDemoLog('success')">成功日志</button>
                <button class="btn" style="background: #f59e0b; color: white;" onclick="addDemoLog('warning')">警告日志</button>
                <button class="btn btn-danger" onclick="addDemoLog('error')">错误日志</button>
                <button class="btn btn-secondary" onclick="clearDemoLog()">清空日志</button>
            </div>
            <div id="realtime-log" class="log-container">
                <div class="log-entry">
                    <div class="log-timestamp">10:30:15</div>
                    <div class="log-level info">INFO</div>
                    <div class="log-message">系统初始化完成</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 通知容器 -->
    <div id="notification-container" class="notification-container"></div>
    
    <!-- 加载指示器 -->
    <div id="loading-indicator" class="loading-indicator">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div>正在加载...</div>
        </div>
    </div>
    
    <!-- 错误容器 -->
    <div id="error-container" class="error-container">
        <div class="error-message">
            <h3>发生错误</h3>
            <p>系统遇到了一个问题，请稍后重试。</p>
            <button class="btn btn-primary" onclick="location.reload()">重新加载</button>
        </div>
    </div>

    <script src="detailed-analysis.js"></script>
    <script>
        // 演示函数
        function showApiSettingsDemo() {
            if (window.workbenchApp) {
                window.workbenchApp.setupApi();
            } else {
                // 创建临时工作台实例进行演示
                const tempApp = new AnalysisWorkbench();
                tempApp.setupApi();
            }
        }
        
        function showConfirmDemo() {
            const confirmed = confirm('这是一个确认对话框演示，确定继续吗？');
            if (confirmed) {
                showNotification('用户确认了操作', 'success');
            } else {
                showNotification('用户取消了操作', 'info');
            }
        }
        
        function showNotification(message, type) {
            if (window.workbenchApp) {
                window.workbenchApp.showNotification(message, type);
            } else {
                // 创建临时工作台实例进行演示
                const tempApp = new AnalysisWorkbench();
                tempApp.showNotification(message, type);
            }
        }
        
        function showDuplicateResults() {
            const container = document.getElementById('demo-results');
            const mockDuplicates = {
                urlDuplicateCount: 3,
                titleDuplicateCount: 2,
                urlDuplicates: [{
                    url: 'https://example.com',
                    bookmarks: [
                        { id: '1', title: '示例网站', url: 'https://example.com', parentTitle: '工作', dateAdded: Date.now() - 86400000 },
                        { id: '2', title: '示例站点', url: 'https://example.com', parentTitle: '收藏', dateAdded: Date.now() - 172800000 }
                    ]
                }],
                titleDuplicates: [{
                    title: '谷歌',
                    bookmarks: [
                        { id: '3', title: '谷歌', url: 'https://google.com', parentTitle: '搜索', dateAdded: Date.now() - 259200000 },
                        { id: '4', title: '谷歌', url: 'https://www.google.com', parentTitle: '常用', dateAdded: Date.now() - 345600000 }
                    ]
                }]
            };
            
            if (window.workbenchApp) {
                window.workbenchApp.displayDuplicateResults(mockDuplicates);
                container.innerHTML = document.getElementById('duplicates-results')?.innerHTML || '请先初始化工作台';
            } else {
                container.innerHTML = '<p>请先加载完整的工作台应用</p>';
            }
        }
        
        function showInvalidResults() {
            const container = document.getElementById('demo-results');
            const mockInvalid = {
                invalid: 2,
                valid: 8,
                skipped: 1,
                invalidBookmarks: [
                    { 
                        id: '5', 
                        title: '失效网站1', 
                        url: 'https://invalid-site-1.com', 
                        error: '连接超时',
                        statusCode: 404,
                        parentTitle: '旧收藏',
                        dateAdded: Date.now() - 432000000
                    },
                    { 
                        id: '6', 
                        title: '失效网站2', 
                        url: 'https://invalid-site-2.com', 
                        error: '域名不存在',
                        statusCode: null,
                        parentTitle: '工作',
                        dateAdded: Date.now() - 518400000
                    }
                ]
            };
            
            if (window.workbenchApp) {
                window.workbenchApp.displayInvalidResults(mockInvalid);
                container.innerHTML = document.getElementById('invalid-results')?.innerHTML || '请先初始化工作台';
            } else {
                container.innerHTML = '<p>请先加载完整的工作台应用</p>';
            }
        }
        
        function showEmptyFolderResults() {
            const container = document.getElementById('demo-results');
            const mockEmptyFolders = {
                count: 2,
                folders: [
                    { 
                        id: '7', 
                        title: '空文件夹1', 
                        path: '书签栏/工作/空文件夹1',
                        parentTitle: '工作',
                        dateAdded: Date.now() - 604800000
                    },
                    { 
                        id: '8', 
                        title: '临时文件夹', 
                        path: '其他书签/临时文件夹',
                        parentTitle: '其他书签',
                        dateAdded: Date.now() - 691200000
                    }
                ]
            };
            
            if (window.workbenchApp) {
                window.workbenchApp.displayEmptyFolderResults(mockEmptyFolders);
                container.innerHTML = document.getElementById('empty-folders-results')?.innerHTML || '请先初始化工作台';
            } else {
                container.innerHTML = '<p>请先加载完整的工作台应用</p>';
            }
        }
        
        function addDemoLog(type) {
            const messages = {
                info: '正在执行操作...',
                success: '操作执行成功',
                warning: '检测到潜在问题',
                error: '操作执行失败'
            };
            
            if (window.workbenchApp) {
                window.workbenchApp.addRealtimeLog(messages[type], type);
            } else {
                // 直接添加到演示日志容器
                const logContainer = document.getElementById('realtime-log');
                const timestamp = new Date().toLocaleTimeString('zh-CN', { 
                    hour12: false, 
                    hour: '2-digit', 
                    minute: '2-digit',
                    second: '2-digit'
                });
                
                const logEntry = document.createElement('div');
                logEntry.className = 'log-entry';
                logEntry.innerHTML = `
                    <div class="log-timestamp">${timestamp}</div>
                    <div class="log-level ${type}">${type.toUpperCase()}</div>
                    <div class="log-message">${messages[type]}</div>
                `;
                
                logContainer.appendChild(logEntry);
                logContainer.scrollTop = logContainer.scrollHeight;
            }
        }
        
        function clearDemoLog() {
            const logContainer = document.getElementById('realtime-log');
            const timestamp = new Date().toLocaleTimeString('zh-CN', { 
                hour12: false, 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            
            logContainer.innerHTML = `
                <div class="log-entry">
                    <div class="log-timestamp">${timestamp}</div>
                    <div class="log-level info">INFO</div>
                    <div class="log-message">日志已清空</div>
                </div>
            `;
        }
        
        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', () => {
            console.log('演示页面加载完成');
            
            // 模拟状态变化
            setTimeout(() => {
                const apiStatus = document.getElementById('api-status-indicator');
                if (apiStatus) {
                    apiStatus.className = 'status-indicator processing';
                    apiStatus.innerHTML = '<div class="status-dot"></div>API连接中';
                }
            }, 2000);
            
            setTimeout(() => {
                const apiStatus = document.getElementById('api-status-indicator');
                if (apiStatus) {
                    apiStatus.className = 'status-indicator online';
                    apiStatus.innerHTML = '<div class="status-dot"></div>API已连接';
                }
            }, 4000);
        });
    </script>
</body>
</html>