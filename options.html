<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ä¹¦ç­¾åŠ©æ‰‹ - è®¾ç½®</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', Helvetica, Arial, sans-serif;
      background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
      min-height: 100vh;
      padding: 32px;
      color: #1d1d1f;
      line-height: 1.6;
    }

    .container {
      max-width: 720px;
      margin: 0 auto;
    }

    /* å¤´éƒ¨åŒºåŸŸ */
    .header {
      background: rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      border: 1px solid rgba(255, 255, 255, 0.4);
      border-radius: 24px;
      padding: 32px;
      margin-bottom: 32px;
      display: flex;
      align-items: center;
      box-shadow: 0 10px 40px rgba(31, 38, 135, 0.3);
      animation: fadeIn 0.6s ease-out;
    }

    .logo {
      width: 56px;
      height: 56px;
      margin-right: 20px;
      border-radius: 14px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    h1 {
      font-size: 32px;
      font-weight: 700;
      color: #1d1d1f;
      letter-spacing: -0.5px;
    }

    /* åŒºå—æ ·å¼ */
    .section {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 20px;
      padding: 32px;
      margin-bottom: 24px;
      box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
      transition: all 0.3s ease;
      position: relative;
      animation: fadeIn 0.8s ease-out;
    }

    .section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
    }

    .section:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(31, 38, 135, 0.45);
    }

    h2 {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #1d1d1f;
      letter-spacing: -0.3px;
    }

    p {
      font-size: 15px;
      color: #6e6e73;
      margin-bottom: 24px;
      font-weight: 400;
    }

    /* è¡¨å•æ ·å¼ */
    .form-group {
      margin-bottom: 24px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 14px;
      color: #1d1d1f;
    }

    input[type="text"], input[type="password"], select {
      width: 100%;
      padding: 14px 16px;
      background: rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 12px;
      font-size: 15px;
      font-family: inherit;
      color: #1d1d1f;
      transition: all 0.2s ease;
      font-weight: 500;
    }

    input[type="text"]:focus, input[type="password"]:focus, select:focus {
      outline: none;
      border-color: #007aff;
      background: rgba(255, 255, 255, 0.6);
      box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
      transform: translateY(-1px);
    }

    input[type="text"]::placeholder, input[type="password"]::placeholder {
      color: rgba(29, 29, 31, 0.5);
      font-weight: 400;
    }

    /* æŒ‰é’®æ ·å¼ */
    button {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 600;
      color: #1d1d1f;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-right: 12px;
      margin-bottom: 8px;
      font-family: inherit;
    }

    button:hover {
      background: rgba(255, 255, 255, 0.4);
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
    }

    button:active {
      transform: translateY(0);
    }

    #save-settings, #save-category-settings {
      background: linear-gradient(135deg, #007aff 0%, #5856d6 100%);
      color: white;
      border: none;
    }

    #save-settings:hover, #save-category-settings:hover {
      background: linear-gradient(135deg, #0056b3 0%, #4a4bb8 100%);
      box-shadow: 0 6px 20px rgba(0, 122, 255, 0.3);
    }

    #test-api, #test-custom-api {
      background: linear-gradient(135deg, #30d158 0%, #00c896 100%);
      color: white;
      border: none;
    }

    #test-api:hover, #test-custom-api:hover {
      background: linear-gradient(135deg, #28a745 0%, #00a67a 100%);
      box-shadow: 0 6px 20px rgba(48, 209, 88, 0.3);
    }

    /* çŠ¶æ€æ¶ˆæ¯ */
    .status {
      padding: 16px 20px;
      border-radius: 12px;
      margin-top: 20px;
      font-weight: 500;
      font-size: 14px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .success {
      background: rgba(52, 209, 88, 0.2);
      border: 1px solid rgba(52, 209, 88, 0.4);
      color: #1e6b3e;
    }

    .error {
      background: rgba(255, 59, 48, 0.2);
      border: 1px solid rgba(255, 59, 48, 0.4);
      color: #8b1a10;
    }

    /* ä¿¡æ¯æ–‡æœ¬ */
    .api-info {
      margin-top: 12px;
      font-size: 13px;
      color: #6e6e73;
      background: rgba(255, 255, 255, 0.1);
      padding: 12px 16px;
      border-radius: 10px;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
    }

    .api-link {
      color: #007aff;
      text-decoration: none;
      font-weight: 500;
    }

    .api-link:hover {
      text-decoration: underline;
    }

    .info-text {
      font-size: 12px;
      color: #8e8e93;
      margin-top: 8px;
      font-style: italic;
    }

    /* è°ƒè¯•é¢æ¿ */
    .debug-panel {
      margin-top: 24px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.05);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      display: none;
    }

    .debug-panel h3 {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #1d1d1f;
    }

    .debug-panel pre {
      max-height: 200px;
      overflow: auto;
      background: rgba(255, 255, 255, 0.4);
      padding: 12px;
      border-radius: 8px;
      font-size: 11px;
      margin: 8px 0;
      font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
      color: #1d1d1f;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .toggle-debug {
      font-size: 13px;
      color: #007aff;
      text-decoration: none;
      cursor: pointer;
      margin-top: 16px;
      display: inline-block;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .toggle-debug:hover {
      text-decoration: underline;
      color: #0056b3;
    }

    /* è‡ªå®šä¹‰APIåŒºåŸŸ */
    .api-section {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 16px;
      padding: 24px;
      margin-top: 16px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .form-description {
      background: rgba(255, 255, 255, 0.1);
      padding: 16px;
      border-radius: 12px;
      margin-top: 16px;
      font-size: 13px;
      color: #6e6e73;
    }

    .form-description ul {
      margin: 8px 0;
      padding-left: 20px;
    }

    .form-description code {
      background: rgba(255, 255, 255, 0.3);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 12px;
      color: #1d1d1f;
    }

    /* å·¥å…·ç±» */
    .hidden {
      display: none !important;
    }

    /* åŠ¨ç”»æ•ˆæœ */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* æ»šåŠ¨æ¡æ ·å¼ */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.5);
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      body {
        padding: 16px;
      }

      .header {
        padding: 24px;
        border-radius: 20px;
      }

      .header h1 {
        font-size: 24px;
      }

      .logo {
        width: 48px;
        height: 48px;
      }

      .section {
        padding: 24px;
        border-radius: 16px;
      }

      h2 {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="images/icon.png" alt="ä¹¦ç­¾åŠ©æ‰‹" class="logo">
      <h1>ä¹¦ç­¾åŠ©æ‰‹ - è®¾ç½®</h1>
    </div>

    <div class="section">
      <h2>ğŸ¤– APIè®¾ç½®</h2>
      <p>è¯·é€‰æ‹©AIæœåŠ¡æä¾›å•†å¹¶é…ç½®APIå¯†é’¥ä»¥å¯ç”¨æ™ºèƒ½ä¹¦ç­¾åˆ†ç±»åŠŸèƒ½ã€‚</p>
      
      <div class="form-group">
        <label for="api-provider">APIæä¾›å•†</label>
        <select id="api-provider">
          <option value="gemini">ğŸ”® Google Gemini</option>
          <option value="openai">ğŸ§  OpenAI</option>
          <option value="custom">ğŸ”§ è‡ªå®šä¹‰</option>
        </select>
      </div>

      <div class="form-group">
        <label for="api-key">APIå¯†é’¥</label>
        <input type="password" id="api-key" placeholder="è¯·è¾“å…¥APIå¯†é’¥">
        <div class="api-info" id="api-gemini-info">
          ğŸ“ è·å–Gemini APIå¯†é’¥ï¼š<a href="https://aistudio.google.com/apikey" target="_blank" class="api-link">Google AI Studio</a>
        </div>
        <div class="api-info hidden" id="api-openai-info">
          ğŸ“ è·å–OpenAI APIå¯†é’¥ï¼š<a href="https://platform.openai.com/api-keys" target="_blank" class="api-link">OpenAI Platform</a>
        </div>
      </div>
      
      <div class="form-group" id="gemini-model-field">
        <label for="gemini-model">Gemini æ¨¡å‹</label>
        <select id="gemini-model">
          <option value="gemini-2.0-flash">gemini-2.0-flash</option>
          <option value="gemini-2.5-flash-preview-05-20">Gemini 2.5 Flash é¢„è§ˆç‰ˆ 05-20</option>
          <option value="gemini-2.5-pro-preview-06-05">Gemini 2.5 Pro é¢„è§ˆç‰ˆ</option>
        </select>
        <div class="info-text">é€‰æ‹©åˆé€‚çš„æ¨¡å‹ç‰ˆæœ¬ï¼Œä¸åŒæ¨¡å‹å¯èƒ½æœ‰ä¸åŒçš„èƒ½åŠ›å’Œè®¡è´¹æ ‡å‡†</div>
      </div>
      
      <div class="form-group hidden" id="openai-model-field">
        <label for="openai-model">OpenAI æ¨¡å‹</label>
        <select id="openai-model">
          <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
          <option value="gpt-4">gpt-4</option>
          <option value="gpt-4-turbo">gpt-4-turbo</option>
        </select>
        <div class="info-text">è¾ƒé«˜ç‰ˆæœ¬çš„æ¨¡å‹é€šå¸¸æ•ˆæœæ›´å¥½ï¼Œä½†è´¹ç”¨ä¹Ÿæ›´é«˜</div>
      </div>
      
      <div class="form-group hidden" id="custom-model-field">
        <label for="custom-model">è‡ªå®šä¹‰æ¨¡å‹æ ‡è¯†ç¬¦</label>
        <input type="text" id="custom-model" placeholder="è¯·è¾“å…¥æ¨¡å‹æ ‡è¯†ç¬¦">
        <div class="info-text">è¾“å…¥æ‚¨çš„APIæœåŠ¡æ‰€éœ€çš„æ¨¡å‹æ ‡è¯†ç¬¦</div>
      </div>

      <div class="form-group hidden" id="custom-api-fields">
        <label for="custom-api-url">è‡ªå®šä¹‰APIç«¯ç‚¹URL</label>
        <input type="text" id="custom-api-url" placeholder="è¯·è¾“å…¥APIç«¯ç‚¹URL">
      </div>

      <button id="save-settings">ğŸ’¾ ä¿å­˜è®¾ç½®</button>
      <button id="test-api">ğŸ§ª æµ‹è¯•APIè¿æ¥</button>
      
      <div id="status-message" class="status hidden"></div>
      
      <div class="toggle-debug" id="toggle-debug">ğŸ” æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯</div>
      
      <div class="debug-panel" id="debug-panel">
        <h3>ğŸ› ï¸ APIè°ƒè¯•ä¿¡æ¯</h3>
        <div>
          <strong>è¯·æ±‚URL:</strong>
          <pre id="debug-url"></pre>
        </div>
        <div>
          <strong>è¯·æ±‚æ•°æ®:</strong>
          <pre id="debug-request"></pre>
        </div>
        <div>
          <strong>å“åº”æ•°æ®:</strong>
          <pre id="debug-response"></pre>
        </div>
        <div>
          <strong>é”™è¯¯ä¿¡æ¯:</strong>
          <pre id="debug-error"></pre>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ“š åˆ†ç±»è®¾ç½®</h2>
      
      <div class="form-group">
        <label for="default-categories">é»˜è®¤åˆ†ç±»ï¼ˆå¯é€‰ï¼Œç”¨é€—å·åˆ†éš”ï¼‰</label>
        <input type="text" id="default-categories" placeholder="æŠ€æœ¯,æ•™è‚²,è´­ç‰©,ç¤¾äº¤åª’ä½“,æ–°é—»,å¨±ä¹,å·¥ä½œ,å…¶ä»–">
        <div class="info-text">è®¾ç½®ä¹¦ç­¾çš„é»˜è®¤åˆ†ç±»æ ‡ç­¾ï¼ŒAIä¼šä¼˜å…ˆä½¿ç”¨è¿™äº›åˆ†ç±»</div>
      </div>
      
      <div class="form-group">
        <label for="batch-size">æ¯æ‰¹å¤„ç†ä¹¦ç­¾æ•°é‡</label>
        <input type="text" id="batch-size" placeholder="50">
        <div class="info-text">
          å½“ä¹¦ç­¾æ•°é‡è¾ƒå¤šæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†æ‰¹å¤„ç†ã€‚å»ºè®®è®¾ç½®ä¸º30-100ä¹‹é—´çš„å€¼ï¼Œè¿‡å¤§å¯èƒ½å¯¼è‡´APIå“åº”è¶…æ—¶ã€‚
        </div>
      </div>
      
      <button id="save-category-settings">ğŸ’¾ ä¿å­˜åˆ†ç±»è®¾ç½®</button>
    </div>

    <div id="custom-api-section" class="api-section" style="display:none;">
      <div class="form-group">
        <label for="custom-api-key">è‡ªå®šä¹‰APIå¯†é’¥</label>
        <input type="password" id="custom-api-key" placeholder="è¾“å…¥æ‚¨çš„è‡ªå®šä¹‰APIå¯†é’¥">
      </div>
      <div class="form-group">
        <label for="custom-api-url">è‡ªå®šä¹‰API URL</label>
        <input type="text" id="custom-api-url" placeholder="è¾“å…¥æ‚¨çš„è‡ªå®šä¹‰API URL">
      </div>
      <div class="form-group">
        <label for="custom-model">æ¨¡å‹åç§°</label>
        <input type="text" id="custom-model" placeholder="è¾“å…¥æ¨¡å‹åç§°">
      </div>
      <button id="test-custom-api" class="test-button">ğŸ§ª æµ‹è¯•è‡ªå®šä¹‰APIè¿æ¥</button>
      <div class="form-description">
        <p><strong>ğŸ“‹ è‡ªå®šä¹‰APIæ ¼å¼è¯´æ˜ï¼š</strong></p>
        <p>ä½¿ç”¨è‡ªå®šä¹‰APIæ—¶ï¼Œæ‰©å±•ä¼šå°è¯•ä»¥å¤šç§æ ¼å¼å‘é€è¯·æ±‚ï¼Œæ”¯æŒå¦‚ä¸‹å­—æ®µï¼š</p>
        <ul>
          <li><code>model</code>: æ¨¡å‹åç§°</li>
          <li><code>prompt</code>: æç¤ºæ–‡æœ¬</li>
          <li><code>message</code>: æ¶ˆæ¯æ–‡æœ¬</li>
          <li><code>messages</code>: OpenAIæ ¼å¼æ¶ˆæ¯æ•°ç»„</li>
          <li><code>content</code>: å†…å®¹æ–‡æœ¬</li>
          <li><code>input</code>: è¾“å…¥æ–‡æœ¬</li>
        </ul>
        <p>æ‚¨çš„APIè‡³å°‘éœ€è¦å¤„ç†å…¶ä¸­ä¸€ç§æ ¼å¼ã€‚å¯ä»¥åœ¨è°ƒè¯•é¢æ¿æŸ¥çœ‹å®Œæ•´çš„è¯·æ±‚å’Œå“åº”è¯¦æƒ…ã€‚</p>
      </div>
    </div>
  </div>

  <script src="options.js"></script>
</body>
</html> 